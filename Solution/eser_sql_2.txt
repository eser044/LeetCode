CREATE OR REPLACE TRIGGER tr_generic_dml
AFTER INSERT OR UPDATE OR DELETE ON database_schema.table_name
FOR EACH ROW
DECLARE
  l_sql clob;
BEGIN
  IF INSERTING THEN
    l_sql := 'INSERT INTO ' || ora_dict_obj_owner || '.table_name (';
    FOR i IN (SELECT column_name FROM all_tab_cols WHERE table_name = 'TABLE_NAME' AND owner = 'DATABASE_SCHEMA') LOOP
      l_sql := l_sql || i.column_name || ', ';
    END LOOP;
    l_sql := rtrim(l_sql, ', ') || ') VALUES (';
    FOR i IN (SELECT column_name FROM all_tab_cols WHERE table_name = 'TABLE_NAME' AND owner = 'DATABASE_SCHEMA') LOOP
      l_sql := l_sql || ':new.' || i.column_name || ', ';
    END LOOP;
    l_sql := rtrim(l_sql, ', ') || ')';
    INSERT INTO table_name_audit (user_name, sql_text, operation, timestamp)
    VALUES (USER, l_sql, 'INSERT', SYSDATE);
  ELSIF UPDATING THEN
    l_sql := 'UPDATE ' || ora_dict_obj_owner || '.table_name SET ';
    FOR i IN (SELECT column_name FROM all_tab_cols WHERE table_name = 'TABLE_NAME' AND owner = 'DATABASE_SCHEMA') LOOP
      l_sql := l_sql || i.column_name || ' = :new.' || i.column_name || ', ';
    END LOOP;
    l_sql := rtrim(l_sql, ', ') || ' WHERE ';
    FOR i IN (SELECT column_name FROM all_tab_cols WHERE table_name = 'TABLE_NAME' AND owner = 'DATABASE_SCHEMA') LOOP
      l_sql := l_sql || 'OLD.' || i.column_name || ' = :old.' || i.column_name || ' AND ';
    END LOOP;
    l_sql := rtrim(l_sql, ' AND ');
    INSERT INTO table_name_audit (user_name, sql_text, operation, timestamp)
    VALUES (USER, l_sql, 'UPDATE', SYSDATE);
  ELSIF DELETING THEN
    l_sql := 'DELETE FROM ' || ora_dict_obj_owner || '.table_name WHERE ';
    FOR i IN (SELECT column_name FROM all_tab_cols WHERE table_name = 'TABLE_NAME' AND owner = 'DATABASE_SCHEMA') LOOP
      l_sql := l_sql || i.column_name || ' = :old.' || i.column_name || ' AND ';
    END LOOP;
    l_sql := rtrim(l_sql, ' AND ');
    INSERT INTO table_name_audit (user_name, sql_text, operation, timestamp)
    VALUES (USER, l_sql, 'DELETE', SYSDATE);
  END IF;
END;
/